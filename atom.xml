<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>keep alive</title>
  
  
  <link href="http://keep-a.live/atom.xml" rel="self"/>
  
  <link href="http://keep-a.live/"/>
  <updated>2022-04-01T07:07:00.492Z</updated>
  <id>http://keep-a.live/</id>
  
  <author>
    <name>Li Wenjian</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>🍺VA-11 Hall-A全成就指南</title>
    <link href="http://keep-a.live/2022/03/30/VA-11-Hall-A/"/>
    <id>http://keep-a.live/2022/03/30/VA-11-Hall-A/</id>
    <published>2022-03-30T15:13:15.000Z</published>
    <updated>2022-04-01T07:07:00.492Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><h2 id="tips">💡Tips</h2><style>    .mask {        background-color: #252525;        color: #252525;        transition: color 0.5s;    }    .mask:hover {        color: #ffffff;    }</style><ul><li>多保存（例如需要买游戏机的成就，你可以在买游戏机之前先保存一下，解锁成就之后sl就可以省掉买游戏机的钱）</li><li>按住<kbd>Ctrl</kbd>可以跳过对话</li><li><span class="mask">存档路径C:\[username]\Appdata\Local\VA_11_Hall_A，可以小改一下钱什么的</span></li></ul><h2 id="隐藏饮品flaming-moai">🥃隐藏饮品Flaming Moai</h2><table><thead><tr class="header"><th>成分</th><th>含量</th></tr></thead><tbody><tr class="odd"><td>Adelhyde</td><td>1</td></tr><tr class="even"><td>Bronson Extract</td><td>1</td></tr><tr class="odd"><td>Powdered Delta</td><td>2</td></tr><tr class="even"><td>Flanergide</td><td>3</td></tr><tr class="odd"><td>Karmotrine</td><td>5</td></tr></tbody></table><p>斐波那契数列</p><h2 id="小游戏">🎮小游戏</h2><p><strong>Hey Jules</strong>和<strong>In the name of beauty!</strong>是关于小游戏的。去购物的时候买一下游戏机就能玩，但是如果不看攻略自己过还是挺难的。推荐去B站上搜一下应该挺多的，或者看<a href="https://www.youtube.com/watch?v=qL_Hg7rHS5o">这个</a>。</p><h2 id="全成就流程">🏆全成就流程</h2><h3 id="day-1">Day 1</h3><p>一开始给Gil调<strong>piano man</strong>会解锁Underappreciated drink</p><table><thead><tr class="header"><th>Donovan</th><th>Ingram</th><th>Sei</th><th>Kim</th></tr></thead><tbody><tr class="odd"><td>Big Beer</td><td>Gut Punch / Sweet</td><td>Moonblast</td><td>Crevice Spike</td></tr><tr class="even"><td>Big Beer</td><td>Piledriver / Sweet</td><td>Mercuryblast</td><td>Piano Man</td></tr><tr class="odd"><td>Big Beer</td><td>Fringe Weaver / Sweet</td><td>Brandtini</td><td>Brandtini</td></tr></tbody></table><p><em>Big Beer指大杯的Beer，即所有原料都两倍</em></p><h3 id="day-2">Day 2</h3><p>【开始前】买<em>全息植物</em>和<em>Mulan Tea</em></p><table><thead><tr class="header"><th>Donovan</th><th>Dorothy</th><th>Jamie</th><th>*Kira* Miki</th></tr></thead><tbody><tr class="odd"><td>Big Beer</td><td>Piano Woman</td><td>Gut Punch</td><td>Mulan Tea</td></tr><tr class="even"><td>Marsblast</td><td>Moonblast</td><td>Marsblast</td><td>Blue Fairy (Max)</td></tr><tr class="odd"><td>Gut Punch (Max Karm)</td><td>Big Sunshine Cloud</td><td></td><td>Sunshine Cloud (Max)</td></tr></tbody></table><h3 id="day-3">Day 3</h3><p>【开始前】买<em>Your Love is a Drug</em></p><table><thead><tr class="header"><th>Alma</th><th>Donovan</th><th>Stella</th><th>Stella &amp; Sei</th><th>Sei &amp; Dorothy</th></tr></thead><tbody><tr class="odd"><td>Bad Touch</td><td>Big Beer</td><td>Piano Woman</td><td>Fringe Weaver x2</td><td>Blue Fairy x2</td></tr><tr class="even"><td>促销</td><td>Bleeding Jane</td><td>Piano Man</td><td></td><td></td></tr><tr class="odd"><td>Big Brandtini</td><td></td><td></td><td></td><td></td></tr></tbody></table><h3 id="day-4">Day 4</h3><table><thead><tr class="header"><th>Art</th><th>Streaming-chan</th><th>Betty &amp; Deal</th><th>Jamie</th></tr></thead><tbody><tr class="odd"><td>Gut Punch</td><td>促销的</td><td>Beer x2</td><td>Marsblast</td></tr><tr class="even"><td>Grizzly Temple</td><td>Big Bad Touch</td><td>Brandtini x2</td><td>Beer</td></tr><tr class="odd"><td></td><td>酒精很高的</td><td>男性化</td><td></td></tr></tbody></table><h3 id="day-5">Day 5</h3><p>【开始前】买<em>小丑飓风</em></p><table><thead><tr class="header"><th>Taylor</th><th>Alma</th><th>Dorothy</th><th>Virgillio</th></tr></thead><tbody><tr class="odd"><td>Blue Fairy</td><td>Cobalt Velvet</td><td>Blue Fairy</td><td>17 ingredients（找一个可以加任意酒精的）</td></tr><tr class="even"><td>Beer</td><td>Fringe Weaver</td><td></td><td>A Fedora</td></tr><tr class="odd"><td></td><td>时尚饮品</td><td></td><td></td></tr></tbody></table><h3 id="day-6">Day 6</h3><p>这里不影响成就，随便选就行【第一章结束】</p><h3 id="day-7">Day 7</h3><p>【开始前】买<em>破裂的达摩</em></p><table><thead><tr class="header"><th>Brian</th><th>Stella</th><th>Art</th><th>Stella &amp; Art</th><th>Art</th><th>Virgillio</th></tr></thead><tbody><tr class="odd"><td>Sugar Rush</td><td>Beer</td><td>Zen Star</td><td>Bad Touch x2</td><td>Piano Man</td><td>Frothy Water</td></tr><tr class="even"><td>Suplex</td><td>甜的</td><td></td><td></td><td></td><td>Zen Star</td></tr></tbody></table><h3 id="day-8">Day 8</h3><p>【开始前】买<em>肩部按摩机</em></p><table><colgroup><col style="width: 12%" /><col style="width: 47%" /><col style="width: 26%" /><col style="width: 12%" /></colgroup><thead><tr class="header"><th>Rad Shiba</th><th>Sei</th><th>Jamie</th><th>Ingram</th></tr></thead><tbody><tr class="odd"><td>Grizzly Temple</td><td>Sugar Rush or Sparkle Star with no alcohol (Karmo).</td><td>Gut Punch</td><td>Bleeding Jane</td></tr><tr class="even"><td>Fluffy Dream</td><td>甜/不含酒精的（解锁<strong>Deep breaths</strong>）</td><td>苦/男性化(Piledriver, Suplex)</td><td>Zen Star/Sweet</td></tr><tr class="odd"><td></td><td></td><td>Beer</td><td></td></tr></tbody></table><h3 id="day-9">Day 9</h3><p>【开始前】买<em>打折啤酒</em></p><table><thead><tr class="header"><th>Norma</th><th>Mario</th><th>Dorothy</th><th>Gil</th></tr></thead><tbody><tr class="odd"><td>Fluffy Dream</td><td>Piano Woman</td><td>Bleeding Jane</td><td>Beer</td></tr><tr class="even"><td></td><td>Moonblast / Gut Punch</td><td>Big Blue Fairy (多加酒精！)</td><td></td></tr><tr class="odd"><td></td><td>Fringe Weaver</td><td>Cobalt Velvet</td><td></td></tr></tbody></table><h3 id="day-10">Day 10</h3><p>【开始前】买<em>卖萌游戏海报</em></p><table><thead><tr class="header"><th>Virgilio</th><th>Sei</th><th>Stella</th><th>Stella &amp; Sei</th><th>Kim</th></tr></thead><tbody><tr class="odd"><td>Sparkle Star</td><td>Beer</td><td>Big Brandtini</td><td>Bloom Light x2</td><td>Sunshine Cloud</td></tr><tr class="even"><td>Bad Touch</td><td>Moonblast</td><td></td><td></td><td>Big Bubbly（例如Cobalt Velvet）</td></tr><tr class="odd"><td></td><td></td><td></td><td></td><td>Anything（Flaming Moai这里可以用隐藏饮料！）</td></tr></tbody></table><h3 id="day-11">Day 11</h3><p>【开始前】买<em>Mega圣诞树</em></p><table style="width:100%;"><colgroup><col style="width: 19%" /><col style="width: 45%" /><col style="width: 15%" /><col style="width: 19%" /></colgroup><thead><tr class="header"><th>Red Shiba &amp; Nacho</th><th>Betty &amp; Deal</th><th>Alma</th><th>Spoiler(<del>Jill</del>)</th></tr></thead><tbody><tr class="odd"><td>Manly/Bitter</td><td>Beer (Can make it big just to be nice!)</td><td>Big Brandtini</td><td>Sugar Rush</td></tr><tr class="even"><td>Bad Touch</td><td>Bloom Light &amp; Fringe Weaver</td><td>冰/酒精</td><td>Big Beer</td></tr><tr class="odd"><td></td><td></td><td>Moonblast</td><td></td></tr></tbody></table><h3 id="day-12">Day 12</h3><table><thead><tr class="header"><th>"Vella"</th><th>Dorothy</th><th>Sei</th><th>Art</th></tr></thead><tbody><tr class="odd"><td>Brandtini</td><td>Piano Woman</td><td>Moonblast</td><td>Gut Punch</td></tr><tr class="even"><td>Fluffy Dream</td><td>甜/女性</td><td>无酒精</td><td>Cobalt Velvet</td></tr></tbody></table><h3 id="day-13">Day 13</h3><p>不影响，随便选【第二章结束】</p><h3 id="day-14">Day 14</h3><p>【开始前】买<em>Alex手办</em></p><table><thead><tr class="header"><th>Virgilio</th><th>Art</th><th>Kim</th><th>Lexi</th></tr></thead><tbody><tr class="odd"><td>Bleeding Jane</td><td>Gut Punch</td><td>Beer</td><td>Fringe Weaver</td></tr><tr class="even"><td>Bloom Light</td><td>Fringe Weaver</td><td>Sugar Rush</td><td>Sugar Rush</td></tr><tr class="odd"><td>Grizzly Temple</td><td></td><td>Cobalt Velvet</td><td></td></tr></tbody></table><h3 id="day-15">Day 15</h3><p>【开始前】买<em>电影海报</em></p><table><thead><tr class="header"><th>Stella</th><th>Stella &amp; Sei</th><th>Sei</th><th>Dorothy</th><th>Mario</th></tr></thead><tbody><tr class="odd"><td>Cobalt Velvet</td><td>Beer x2</td><td>经典</td><td>Piano Woman</td><td>Sunshine Cloud</td></tr><tr class="even"><td>Moonblast</td><td></td><td>发泡</td><td>Anything</td><td>Piano Man</td></tr><tr class="odd"><td>Grizzly Temple</td><td></td><td></td><td></td><td></td></tr></tbody></table><h3 id="day-16">Day 16</h3><p>【开始前】买<em>招财猫</em>；在见Alma之前保存游戏</p><table><thead><tr class="header"><th>Ingram</th><th>Alma</th><th>Gil</th><th>Dorothy</th><th><del>Hacker</del></th></tr></thead><tbody><tr class="odd"><td>Marsblast</td><td>Bad Touch</td><td>Bleeding Jane</td><td>Fluffy Dream</td><td>Brandtini</td></tr><tr class="even"><td>Suplex</td><td>Brandtini</td><td>Beer</td><td></td><td>Zen Star</td></tr><tr class="odd"><td>Gut Punch</td><td>Beer</td><td></td><td></td><td></td></tr></tbody></table><p>给Alma上一杯Flaming Moai（隐藏饮料）会触发Hacker剧情和成就（和Stella一样）</p><h3 id="day-17">Day 17</h3><p>【开始前】买<em>*Kira* Miki海报</em>；在见Stella之前保存游戏（<strong>A different breed of cat</strong>成就）！</p><table><thead><tr class="header"><th>Donovan</th><th>*Kira* Miki</th><th>Stella</th><th>Alma</th><th><del>Jess</del></th></tr></thead><tbody><tr class="odd"><td>Big Beer</td><td>甜</td><td>Bleeding Jane</td><td>Big Cobalt Velvet</td><td>Sugar Rush</td></tr><tr class="even"><td>Moonblast</td><td>Mulan Tea</td><td>Brandtini</td><td>Sugar Rush</td><td>Brandtini</td></tr><tr class="odd"><td>Piledriver</td><td>Sparkle Star</td><td>经典（Flaming Moai）</td><td>Beer</td><td></td></tr></tbody></table><p>给Stella调Flaming Moai（隐藏饮料）回破坏<strong>perfect bonus</strong>成就，所以要先存个档！！！</p><h3 id="day-18">Day 18</h3><p>如果一切顺利，你在早上会获得<strong>I feel like an adult</strong>、 <strong>Focus!</strong> 和<strong>Employee of the month</strong>三个成就。</p><table><thead><tr class="header"><th>Betty &amp; Deal</th><th>Streaming-chan</th><th>Dorothy</th><th>Streaming-chan</th></tr></thead><tbody><tr class="odd"><td>Beer</td><td>促销</td><td>Gut Punch</td><td>Sugar Rush</td></tr><tr class="even"><td>Bloom Light + non-alcoholic</td><td>Girly</td><td>Brandtini</td><td>Big Beer</td></tr><tr class="odd"><td>PIano Man + Piano Woman</td><td></td><td>Sugar Rush</td><td></td></tr><tr class="even"><td></td><td></td><td>Big Beer</td><td></td></tr></tbody></table><h3 id="day-19">Day 19</h3><table><thead><tr class="header"><th>Gaby</th></tr></thead><tbody><tr class="odd"><td>甜/无酒精</td></tr></tbody></table><h3 id="后记">后记</h3><p>你会完成以下成就</p><table><thead><tr class="header"><th>成就</th></tr></thead><tbody><tr class="odd"><td>Dorothinquisition</td></tr><tr class="even"><td>Tim's Curry</td></tr><tr class="odd"><td>Listen to my song!</td></tr><tr class="even"><td>Sisterly bonding</td></tr><tr class="odd"><td>And now, for something completely different…</td></tr></tbody></table><h3 id="二周目">二周目</h3><p>记得去开二周目！</p><h2 id="其他成就">📒其他成就</h2><p>这里有些你应该已经自动解锁了，如果还有没解锁的方法如下</p><table><thead><tr class="header"><th>成就</th><th>解锁方法</th></tr></thead><tbody><tr class="odd"><td>Welcome to Valhalla!</td><td>开始游戏</td></tr><tr class="even"><td>G'evening</td><td>开始chapter 1</td></tr><tr class="odd"><td>Coming right up</td><td>开始chapter 2</td></tr><tr class="even"><td>Time to mix drinks and change lives</td><td>开始chapter 3</td></tr><tr class="odd"><td>Please come again</td><td>完成一周目</td></tr><tr class="even"><td>Welcome back!</td><td>开始二周目</td></tr><tr class="odd"><td>Caci... que?</td><td>第3天完成Stella的所有单</td></tr><tr class="even"><td>Cyberfunk</td><td>装饰豹纹墙纸</td></tr><tr class="odd"><td>I know what I said</td><td>上错一份drink</td></tr><tr class="even"><td>Flawless Service</td><td>应该已经自动解锁了</td></tr><tr class="odd"><td>Did you miss me?</td><td>到Day 14</td></tr><tr class="even"><td>(´・ω・`)</td><td>在酒吧的时候，键盘按下<kbd>p</kbd></td></tr><tr class="odd"><td>I like it, okay?</td><td>在酒吧歌单里填满同一首歌</td></tr><tr class="even"><td>So unnecessary</td><td>买所有装饰（买完可以sl）</td></tr><tr class="odd"><td>Living with style</td><td>买所有的nanocamo pattern</td></tr><tr class="even"><td>Hit the jukebox</td><td>买所有的歌（有些歌可能到二周目才能解锁）</td></tr><tr class="odd"><td>Jill of all trades</td><td>完成所有成就</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;h2 id=&quot;tips&quot;&gt;💡Tips&lt;/h2&gt;

&lt;style&gt;
    .mask {
        background-color: #252525;
        </summary>
      
    
    
    
    
    <category term="video games" scheme="http://keep-a.live/tags/video-games/"/>
    
    <category term="games" scheme="http://keep-a.live/tags/games/"/>
    
  </entry>
  
  <entry>
    <title>Titanic Data Sankey</title>
    <link href="http://keep-a.live/2022/03/27/Titanic-Data-Vi/"/>
    <id>http://keep-a.live/2022/03/27/Titanic-Data-Vi/</id>
    <published>2022-03-27T04:56:32.000Z</published>
    <updated>2022-03-27T04:59:43.704Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><div id="container" style="height: 400%"></div>        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.3.1/dist/echarts.min.js"></script>        <!-- Uncomment this line if you want to dataTool extension        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.3.1/dist/extension/dataTool.min.js"></script>        -->        <!-- Uncomment this line if you want to use gl extension        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>        -->        <!-- Uncomment this line if you want to echarts-stat extension        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-stat@latest/dist/ecStat.min.js"></script>        -->        <!-- Uncomment this line if you want to use map        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.3.1/map/js/china.js"></script>        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.3.1/map/js/world.js"></script>        -->        <!-- Uncomment these two lines if you want to use bmap extension        <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=<Your Key Here>"></script>        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@{{version}}/dist/extension/bmap.min.js"></script>        -->        <script type="text/javascript">var dom = document.getElementById("container");var myChart = echarts.init(dom);var app = {};var data;data = {"nodes": [    {"name": "1st"},    {"name": "2nd"},    {"name": "3rd"},    {"name": "male"},    {"name": "female"},    {"name": "survived = 1"},    {"name": "survived = 0"}, ], "links": [    {"source": "1st", "target": "survived = 1", "value": 200},    {"source": "1st", "target": "survived = 0", "value": 123},    {"source": "2nd", "target": "survived = 1", "value": 119},    {"source": "2nd", "target": "survived = 0", "value": 158},    {"source": "3rd", "target": "survived = 1", "value": 181},    {"source": "3rd", "target": "survived = 0", "value": 528},    // {"source": "1st", "target": "male", "value": 179},    // {"source": "1st", "target": "female", "value": 143},    // {"source": "2nd", "target": "male", "value": 171},    // {"source": "2nd", "target": "female", "value": 106},    // {"source": "3rd", "target": "male", "value": 493},    // {"source": "3rd", "target": "female", "value": 216},    {"source": "survived = 1", "target": "male", "value": 161},    {"source": "survived = 0", "target": "male", "value": 682},    {"source": "survived = 1", "target": "female", "value": 338},    {"source": "survived = 0", "target": "female", "value": 127} ]}var option;option = {      tooltip: {        trigger: 'item',        triggerOn: 'mousemove'      },      series: [        {          type: 'sankey',          data: data.nodes,          links: data.links,          emphasis: {            focus: 'adjacency'          },          levels: [            {              depth: 0,              itemStyle: {                color: '#fbb4ae'              },              lineStyle: {                color: 'source',                opacity: 0.6              }            },            {              depth: 1,              itemStyle: {                color: '#b3cde3'              },              lineStyle: {                color: 'source',                opacity: 0.6              }            },            {              depth: 2,              itemStyle: {                color: '#ccebc5'              },              lineStyle: {                color: 'source',                opacity: 0.6              }            },            {              depth: 3,              itemStyle: {                color: '#decbe4'              },              lineStyle: {                color: 'source',                opacity: 0.6              }            }          ],          lineStyle: {            curveness: 0.5          }        }      ]    }if (option && typeof option === 'object') {    myChart.setOption(option);}</script>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;
&lt;div id=&quot;container&quot; style=&quot;height: 400%&quot;&gt;&lt;/div&gt;

        &lt;script type=&quot;text/javascript&quot; s</summary>
      
    
    
    
    
    <category term="zyz" scheme="http://keep-a.live/tags/zyz/"/>
    
  </entry>
  
  <entry>
    <title>Sakura in Closed School</title>
    <link href="http://keep-a.live/2022/03/25/Epidemic-Closed-Schools-Sakura/"/>
    <id>http://keep-a.live/2022/03/25/Epidemic-Closed-Schools-Sakura/</id>
    <published>2022-03-25T11:34:22.000Z</published>
    <updated>2022-03-26T04:45:15.888Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><table><thead><tr class="header"><th style="text-align: center;">Camera parameters</th><th style="text-align: center;">Value</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">Aperture factor</td><td style="text-align: center;">5</td></tr><tr class="even"><td style="text-align: center;">Exposure mode</td><td style="text-align: center;">auto</td></tr><tr class="odd"><td style="text-align: center;">Exposure offset</td><td style="text-align: center;">0</td></tr><tr class="even"><td style="text-align: center;">Exposure procedure</td><td style="text-align: center;">normal</td></tr><tr class="odd"><td style="text-align: center;">Exposure time</td><td style="text-align: center;">1/800</td></tr><tr class="even"><td style="text-align: center;">Flash</td><td style="text-align: center;">off</td></tr><tr class="odd"><td style="text-align: center;">Focal length</td><td style="text-align: center;">50</td></tr><tr class="even"><td style="text-align: center;">ISO</td><td style="text-align: center;">200</td></tr><tr class="odd"><td style="text-align: center;">Lens model</td><td style="text-align: center;">LUMIX S 50/F1.8</td></tr><tr class="even"><td style="text-align: center;">White balance</td><td style="text-align: center;">auto</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th style=&quot;text-align: center;&quot;&gt;Camera parameters&lt;/th&gt;</summary>
      
    
    
    
    <category term="gallery" scheme="http://keep-a.live/categories/gallery/"/>
    
    
    <category term="life" scheme="http://keep-a.live/tags/life/"/>
    
    <category term="photography" scheme="http://keep-a.live/tags/photography/"/>
    
    <category term="Tongji University" scheme="http://keep-a.live/tags/Tongji-University/"/>
    
  </entry>
  
  <entry>
    <title>Updated the Website Logo</title>
    <link href="http://keep-a.live/2022/03/14/Updated-Logo-of-the-Blog/"/>
    <id>http://keep-a.live/2022/03/14/Updated-Logo-of-the-Blog/</id>
    <published>2022-03-14T09:36:04.000Z</published>
    <updated>2022-03-26T04:48:26.927Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><p style="text-align: center"><img src="https://i.imgur.com/d3mRLp1.gif" style="width:50%;" /></p><p>It’s time to select a new logo for the website. A small bird from <a href="https://itch.io/profile/ma9ici4n">ma9ici4n</a> would be perfect as a blog logo for someone who is extremely fond of birds. (btw I think birds are very cute creatures and even my <a href="/2021/12/07/Liwenjian-Typora-theme/">Typora theme</a> was inspired by a painting of a bird.)</p><p>This reminds me of the old computer version of QQ that had a feature called <em>QQ Pet</em> where you could feed it, give it a bath or something else. I thought it was really funny when I was a kid, but it’s long since become a tear in the eye of the times(刻のなみだ).</p><p><strong>TODO:</strong> It may be updated later with some interactive effects, such as feeding it when the mouse is hovered over or something.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;
&lt;p style=&quot;text-align: center&quot;&gt;
&lt;img src=&quot;https://i.imgur.com/d3mRLp1.gif&quot; style=&quot;width:50</summary>
      
    
    
    
    
    <category term="painting" scheme="http://keep-a.live/tags/painting/"/>
    
  </entry>
  
  <entry>
    <title>在炮弹冲击（ShellShock Live）中进行精准打击</title>
    <link href="http://keep-a.live/2022/03/07/Precision-Strikes-in-ShellShock-Live/"/>
    <id>http://keep-a.live/2022/03/07/Precision-Strikes-in-ShellShock-Live/</id>
    <published>2022-03-07T12:28:50.000Z</published>
    <updated>2022-03-16T06:24:56.902Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><p>炮弹冲击(ShellShock Live)是一款战略类多人在线火炮游戏，类似于小时候4399上的弹弹堂。众所周知，这类游戏有着真实的物理引擎，所以其打出炮弹的轨迹当然也是可以计算的。</p><h2 id="模型">🚢 模型</h2><p>炮弹的飞行就是一个简单的<a href="https://zh.wikipedia.org/wiki/平抛运动">抛体运动</a>（在不考虑风力的情况下）</p><p>而问题就在于求出游戏中的</p><ul><li>重力加速度（像素<span class="math inline">\(/\text{s}^2\)</span>）</li><li>速度（像素<span class="math inline">\(/\text{s}\)</span>）和力度的对应关系</li></ul><p>关于这两点，ilyaki大佬在steam上的一篇指南<a href="https://steamcommunity.com/sharedfiles/filedetails/?id=1327582953">Perfect accuracy with CALCULATIONS</a>中讲解的十分详细，并且通过测量炮弹飞行时间等一系列方法计算出了游戏中的参数，并且给出了最终的公式 <span class="math display">\[\text{power}=\frac {-2} {gq} * \sqrt{\frac {-g*s_x^2} {2\cos^2\Theta*(\tan\Theta*s_x-s_y)}}\]</span> 其中<span class="math inline">\(s_x\)</span>为水平距离，<span class="math inline">\(s_y\)</span>为垂直距离，<span class="math inline">\(\Theta\)</span>为发射角度，<span class="math inline">\(g=-379.106\)</span>为重力加速度，<span class="math inline">\(q=0.0518718\)</span>为常数。</p><p>有了这个公式就可以通过<strong>起点</strong>与<strong>终点</strong>的坐标，在给定<strong>发射角度</strong>的情况下，给出应该使用的<strong>力度</strong>。</p><h2 id="程序">⚙️程序</h2><p>程序主要参考了Github上项目<a href="https://github.com/henrydatei">henrydatei</a>/<strong><a href="https://github.com/henrydatei/ShellShockLiveAimbot">ShellShockLiveAimbot</a></strong></p><p>首先使用上面的公式计算力度</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># calculate velocity</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calcVelocity</span>(<span class="params">x_diff, y_diff, angle</span>):</span></span><br><span class="line">    <span class="comment"># from https://steamcommunity.com/sharedfiles/filedetails/?id=1327582953</span></span><br><span class="line">    g = -<span class="number">379.106</span></span><br><span class="line">    q = <span class="number">0.0518718</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        v0 = -<span class="number">2</span> / (g * q) * math.sqrt((-g * x_diff * x_diff) / (</span><br><span class="line">            <span class="number">2</span> * math.cos(math.radians(angle)) *</span><br><span class="line">            math.cos(math.radians(angle)) * (</span><br><span class="line">            math.tan(math.radians(angle)) * x_diff - y_diff)))</span><br><span class="line">    <span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">        v0 = <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> v0</span><br></pre></td></tr></table></figure><p>但是游戏里的力度，范围是0～100，所以我们就要找出能打到的角度</p><p>这里我们计算两个角度，一个是能打到的最小角度，另一个是最大角度（也就是最大力度），以适应多变的环境（传送门、反弹等）</p><p>以最小角度为例</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calcOptimal</span>(<span class="params">x_diff, y_diff, wind</span>):</span></span><br><span class="line">    smallestVelocity = <span class="number">100</span></span><br><span class="line">    bestAngle = <span class="number">0</span></span><br><span class="line">    <span class="keyword">global</span> velocity</span><br><span class="line">    <span class="keyword">global</span> angle</span><br><span class="line">    <span class="keyword">for</span> possibleAngle <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">90</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> wind == <span class="number">0</span>:</span><br><span class="line">                v0 = calcVelocity(x_diff, y_diff, possibleAngle)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                v0 = calcVelocityWithWind(x_diff, y_diff,</span><br><span class="line">                possibleAngle, wind)</span><br><span class="line">            <span class="keyword">if</span> v0 &lt; smallestVelocity:</span><br><span class="line">                smallestVelocity = v0</span><br><span class="line">                bestAngle = possibleAngle</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Smallest Velocity&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Velocity = &quot;</span> + <span class="built_in">str</span>(smallestVelocity))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Angle = &quot;</span> + <span class="built_in">str</span>(bestAngle))</span><br><span class="line">    velocity = smallestVelocity</span><br><span class="line">    angle = bestAngle</span><br></pre></td></tr></table></figure><p>另外需要做的就是获取你和目标的坐标，这里使用第三方库<code>pynput</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">posPlayer</span>(<span class="params">x, y, button, pressed</span>):</span></span><br><span class="line">    <span class="keyword">if</span> pressed:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Your position: &quot;</span> + <span class="built_in">str</span>(x) + <span class="string">&quot;, &quot;</span> + <span class="built_in">str</span>(y))</span><br><span class="line">        <span class="keyword">global</span> YourX</span><br><span class="line">        YourX = x</span><br><span class="line">        <span class="keyword">global</span> YourY</span><br><span class="line">        YourY = y</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure><p>完整代码<a href="\shellshock.py">下载</a></p><p><strong>Requirement</strong>：</p><ul><li>Python 3</li><li>pynput</li><li>pyautogui</li></ul><p>运行以下命令即可安装： <code>pip install pynput pyautogui</code></p><p><strong>运行</strong>：</p><ol type="1"><li>使用Steam打开游戏并使用窗口化运行</li><li>命令行中使用<code>python shellshock.py</code>运行脚本</li><li>按提示输入窗口宽度（以调整程序中的重力加速度）</li><li>键盘按<kbd>p</kbd>，然后使用鼠标点击自己的坦克位置</li><li>键盘按<kbd>e</kbd>，使用鼠标点击目标位置</li><li>命令行会给你弹出两个力度和角度，分别对应最平抛和最高抛，并且自动帮你点击高抛（不太准自己微调一下）</li></ol><h2 id="注意事项">⚠️注意事项</h2><p>这属于技术型作弊，但依然是作弊行为，请不要在线上模式中使用。你可以用它来精准打击你的朋友，起到出其不意的效果，或者在单人模式中瞄准boss。</p><p>Only tested on Windows. Not fully tested, but should work for MacOS/Linux. (You may face some problems caused by system permissions in macOS, especially when using <code>pyautogui</code>.)</p>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;p&gt;炮弹冲击(ShellShock Live)是一款战略类多人在线火炮游戏，类似于小时候4399上的弹弹堂。众所周知，这类游戏有着真实的物理引擎，所以其打出炮弹的轨迹当然也是可以</summary>
      
    
    
    
    
    <category term="video games" scheme="http://keep-a.live/tags/video-games/"/>
    
    <category term="games" scheme="http://keep-a.live/tags/games/"/>
    
    <category term="ShellShock Live" scheme="http://keep-a.live/tags/ShellShock-Live/"/>
    
  </entry>
  
  <entry>
    <title>Weekend Monopoly Game</title>
    <link href="http://keep-a.live/2022/03/06/Weekend-Monopoly-Game/"/>
    <id>http://keep-a.live/2022/03/06/Weekend-Monopoly-Game/</id>
    <published>2022-03-06T15:59:19.000Z</published>
    <updated>2022-03-07T03:54:57.908Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=424550497&bvid=BV1y341157AY&cid=543476985&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;" ></iframe></div>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;
&lt;div style=&quot;position: relative; width: 100%; height: 0; padding-bottom: 75%;&quot;&gt;
&lt;iframe sr</summary>
      
    
    
    
    
    <category term="games" scheme="http://keep-a.live/tags/games/"/>
    
    <category term="Board games" scheme="http://keep-a.live/tags/Board-games/"/>
    
  </entry>
  
  <entry>
    <title>VINS-Mono中回环检测的相关流程</title>
    <link href="http://keep-a.live/2022/02/27/Loop-Detection-in-VINS-Mono/"/>
    <id>http://keep-a.live/2022/02/27/Loop-Detection-in-VINS-Mono/</id>
    <published>2022-02-27T07:27:55.000Z</published>
    <updated>2022-02-27T07:39:20.337Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><p><strong>pose_graph_node</strong> 主线程<code>process()</code></p><p>创建关键帧<code>KeyFrame* keyframe = new KeyFrame(...</code></p><p>↘️</p><p>  <strong>keyframe</strong> 构造函数<code>KeyFrame()</code></p><p>  计算新的特征点和描述子<code>computeBRIEFPoint()</code></p><p>↙️</p><p>添加关键帧<code>posegraph.addKeyFrame(keyframe, 1);</code></p><p>↘️</p><p>  <strong>pose_graph</strong> 添加关键帧函数<code>addKeyFrame()</code></p><p>  进行回环检测<code>loop_index = detectLoop(cur_kf, cur_kf-&gt;index);</code></p><p>  ↘️</p><p>    回环检测函数<code>detectLoop()</code></p><p>    查询数据库得到与每一帧的相似度评分<code>db.query(...</code></p><p>    返回评分大于0.015的最早的关键帧索引<code>min_index</code></p><p>  ↙️</p><p>  当前帧与回环候选帧进行描述子匹配<code>cur_kf-&gt;findConnection(old_kf)</code></p><p>  ↘️（匹配成功）</p><p>    计算当前帧与回环帧相对位姿等</p><p>  ↙️</p><p>  将当前帧放入优化队列中<code>optimize_buf.push(cur_kf-&gt;index)</code></p><p>休眠5ms后循环</p>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;p&gt;&lt;strong&gt;pose_graph_node&lt;/strong&gt; 主线程&lt;code&gt;process()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;创建关键帧&lt;code&gt;KeyFrame* </summary>
      
    
    
    
    
    <category term="Notes" scheme="http://keep-a.live/tags/Notes/"/>
    
    <category term="SLAM" scheme="http://keep-a.live/tags/SLAM/"/>
    
    <category term="graduation project" scheme="http://keep-a.live/tags/graduation-project/"/>
    
  </entry>
  
  <entry>
    <title>Installing and running VINS-Mono On WSL2</title>
    <link href="http://keep-a.live/2022/02/26/Installing-and-running-VINS-Mono-On-WSL2/"/>
    <id>http://keep-a.live/2022/02/26/Installing-and-running-VINS-Mono-On-WSL2/</id>
    <published>2022-02-26T14:46:05.000Z</published>
    <updated>2022-02-26T15:53:04.497Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><p>众所周知在WSLg发布之后，WSL成为了最好的Linux桌面版（bushi）。本文将记录WSL2(Ubuntu)中<strong>VINS-Mono</strong>的配置过程。</p><p>VINS-Mono作为17年的项目，依赖的环境版本都很早，所以现在想要配置需要做一些调整。对于这种旧项目的复现，我认为原则应该是按照新的版本调整之前的代码，而非使用老版本的依赖项。</p><h2 id="安装依赖项">安装依赖项</h2><h3 id="ros">ROS</h3><p>ROS有很多版本，目前官网推荐的ROS1版本为<strong>Noetic</strong></p><figure><img src="https://gitee.com/lee-jesse-jiaze/picture-bed/raw/master/uPic/RolMFR.png" alt="RolMFR" /><figcaption aria-hidden="true">RolMFR</figcaption></figure><p>按<a href="http://wiki.ros.org/noetic/Installation/Ubuntu">官方文档</a>安装即可，在这个过程中你可能需要使用<a href="/2021/12/22/WSL使用Windows中的V2rayN/">代理</a>。</p><h3 id="ceres-solver">Ceres Solver</h3><p>直接参考<a href="http://ceres-solver.org/installation.html">官网</a>安装2.0版本或者最新版均可，如果你想使用CUDA加速Ceres可以参考<a href="/2021/12/22/Install-CUDA/">这篇</a>。</p><p>在完成安装之后VINS-Mono依赖的例如Eigen3/OpenCV/Cmake之类的依赖想均会自动装好。但值得注意的是Noetic自带的是OpenCV4，与<a href="https://github.com/HKUST-Aerial-Robotics">HKUST-Aerial-Robotics</a>/<strong><a href="https://github.com/HKUST-Aerial-Robotics/VINS-Mono">VINS-Mono</a></strong>中依赖的OpenCV3有所差异，这可能会引起一些问题。</p><h2 id="编译vins-mono">编译VINS-Mono</h2><p>按照<a href="https://github.com/HKUST-Aerial-Robotics">HKUST-Aerial-Robotics</a>/<strong><a href="https://github.com/HKUST-Aerial-Robotics/VINS-Mono">VINS-Mono</a></strong>中的步骤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd ~/catkin_ws/src</span><br><span class="line">git clone https://github.com/HKUST-Aerial-Robotics/VINS-Mono.git</span><br><span class="line">cd ../</span><br><span class="line">catkin_make</span><br><span class="line">source ~/catkin_ws/devel/setup.bash</span><br></pre></td></tr></table></figure><p>这里可能遇到一系列问题</p><h3 id="ceres相关问题">Ceres相关问题</h3><p>以<code>error: ‘integer_sequence’ is not a member of ‘std’</code>为例</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/include/ceres/internal/integer_sequence_algorithm.h:<span class="number">64</span>:<span class="number">21</span>: error: ‘integer_sequence’ is <span class="keyword">not</span> a member of ‘std’</span><br><span class="line"> <span class="class"><span class="keyword">struct</span> <span class="title">SumImpl</span>&lt;</span>std::integer_sequence&lt;T, N, Ns...&gt;&gt; &#123;</span><br><span class="line">                     ^~~~~~~~~~~~~~~~</span><br><span class="line">/usr/local/include/ceres/internal/integer_sequence_algorithm.h:<span class="number">64</span>:<span class="number">21</span>: error: ‘integer_sequence’ is <span class="keyword">not</span> a member of ‘std’</span><br><span class="line">/usr/local/include/ceres/internal/integer_sequence_algorithm.h:<span class="number">64</span>:<span class="number">46</span>: error: <span class="function">wrong number of <span class="keyword">template</span> <span class="title">arguments</span> <span class="params">(<span class="number">3</span>, should be <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function"> struct SumImpl&lt;std::integer_sequence&lt;T, N, Ns...&gt;&gt; </span>&#123;</span><br><span class="line">                                              ^~~</span><br><span class="line">/usr/local/include/ceres/internal/integer_sequence_algorithm.h:<span class="number">60</span>:<span class="number">8</span>: note: provided <span class="keyword">for</span> ‘<span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">Seq</span>&gt;</span> <span class="class"><span class="keyword">struct</span> <span class="title">ceres</span>:</span>:internal::SumImpl’</span><br><span class="line"> <span class="class"><span class="keyword">struct</span> <span class="title">SumImpl</span>;</span></span><br><span class="line">        ^~~~~~~</span><br></pre></td></tr></table></figure><p>这是因为Ceres需要C++ 14及以上，详见这个<a href="https://github.com/ceres-solver/ceres-solver/issues/604">issues</a>。只要把VINS-Mono中所有的</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;-std=c++11</span></span><br></pre></td></tr></table></figure><p>替换成</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;-std=c++14</span></span><br></pre></td></tr></table></figure><p>即可</p><h3 id="opencv相关问题">OpenCV相关问题</h3><p>例如<code>'CV_BGR2RGB' was not declared in this scope</code>，这是由于很多宏定义的名字在OpenCV3和4中不一样，会有很多诸如此类的报错，可以使用vscode中的正则表达式替换批量解决</p><figure><img src="https://gitee.com/lee-jesse-jiaze/picture-bed/raw/master/uPic/sccvscode.png" alt="sccvscode" /><figcaption aria-hidden="true">sccvscode</figcaption></figure><ol type="1"><li><strong>遇到OpenCV版本不对</strong></li></ol><p>​ 查找：<code>(find_package\(OpenCV).*</code></p><p>​ 替换：<code>$1 REQUIRED)</code></p><ol start="2" type="1"><li><strong>CV_GRAY2RGB等</strong></li></ol><p>​ 查找: <code>CV_(.*GRAY[^)]*)</code></p><p>​ 替换: <code>cv::COLOR_$1</code></p><ol start="3" type="1"><li><strong>CV_AA（不用正则表达式）</strong></li></ol><p>​ 查找: <code>CV_AA</code></p><p>​ 替换: <code>cv::LINE_AA</code></p><ol start="4" type="1"><li><strong>CV_CALIB_等</strong></li></ol><p>​ 查找: <code>CV_(CALIB[^ ,)]*)</code></p><p>​ 替换: <code>cv::$1</code></p><ol start="5" type="1"><li><strong>CV_LOAD_IMAGE_UNCHANGED、CV_LOAD_IMAGE_GRAYSCALE</strong></li></ol><p>​ 查找：<code>CV_LOAD_IMAGE_([^ )]*)</code></p><p>​ 替换：<code>cv::IMREAD_$1</code></p><ol start="6" type="1"><li><strong>CV_FONT_HERSHEY_SIMPLEX（不用正则表达式）</strong></li></ol><p>​ 查找：<code>CV_FONT_HERSHEY_SIMPLEX</code></p><p>​ 替换：<code>cv::FONT_HERSHEY_SIMPLEX</code></p><ol start="7" type="1"><li><strong>No such file or directory <code>#include&lt;opencv/cv.h&gt;</code>：</strong></li></ol><p>​ 在对应文件添加</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/imgproc/imgproc_c.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/highgui/highgui_c.h&gt;</span></span></span><br></pre></td></tr></table></figure><p>完成编译后按官方文档运行即可</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd ~/catkin_ws/devel/</span><br><span class="line">source ~/catkin_ws/devel/setup.bash</span><br><span class="line">roslaunch vins_estimator euroc.launch </span><br><span class="line">roslaunch vins_estimator vins_rviz.launch</span><br><span class="line">rosbag play YOUR_PATH_TO_DATASET/MH_01_easy.bag </span><br></pre></td></tr></table></figure><figure><img src="https://gitee.com/lee-jesse-jiaze/picture-bed/raw/master/uPic/IMG_2402.png" alt="IMG_2402" /><figcaption aria-hidden="true">IMG_2402</figcaption></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;p&gt;众所周知在WSLg发布之后，WSL成为了最好的Linux桌面版（bushi）。本文将记录WSL2(Ubuntu)中&lt;strong&gt;VINS-Mono&lt;/strong&gt;的配置过</summary>
      
    
    
    
    
    <category term="Notes" scheme="http://keep-a.live/tags/Notes/"/>
    
    <category term="Tutorials" scheme="http://keep-a.live/tags/Tutorials/"/>
    
    <category term="SLAM" scheme="http://keep-a.live/tags/SLAM/"/>
    
    <category term="graduation project" scheme="http://keep-a.live/tags/graduation-project/"/>
    
    <category term="WSL2" scheme="http://keep-a.live/tags/WSL2/"/>
    
  </entry>
  
  <entry>
    <title>Share a painting I really like</title>
    <link href="http://keep-a.live/2022/02/16/Share-a-painting-I-really-like/"/>
    <id>http://keep-a.live/2022/02/16/Share-a-painting-I-really-like/</id>
    <published>2022-02-16T07:34:19.000Z</published>
    <updated>2022-02-16T07:36:41.272Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><p><em>Crane</em> by <a href="https://soposters.com/shop/tiangan/crane/">Tian Gan</a>.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;p&gt;&lt;em&gt;Crane&lt;/em&gt; by &lt;a href=&quot;https://soposters.com/shop/tiangan/crane/&quot;&gt;Tian Gan&lt;/a&gt;.&lt;/p&gt;</summary>
      
    
    
    
    <category term="gallery" scheme="http://keep-a.live/categories/gallery/"/>
    
    
    <category term="painting" scheme="http://keep-a.live/tags/painting/"/>
    
  </entry>
  
  <entry>
    <title>使用Docker搭建TeamSpeak语音服务器</title>
    <link href="http://keep-a.live/2022/02/15/How-to-Setup-a-Teamspeak-Server-with-Docker/"/>
    <id>http://keep-a.live/2022/02/15/How-to-Setup-a-Teamspeak-Server-with-Docker/</id>
    <published>2022-02-15T04:09:08.000Z</published>
    <updated>2022-03-27T06:24:51.386Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><h2 id="我的语音聊天服务器">🎮我的语音聊天服务器</h2><p>（主要用于游戏连麦/聊天）</p><p><strong>地址</strong>：106.15.60.45</p><p><strong>密码</strong>：<font color='white'>K3RRpIME</font></p><h2 id="搭建teamspeak服务器">🧱搭建Teamspeak服务器</h2><p><a href="https://teamspeak.com/en/">Teamspeak</a>（简称TS）是一款团队语音通讯工具软件，很轻量、通话质量高而去保密性好，可以完美代替yy语音之类的软件（就连个麦搞那么大的客户端干嘛）。提示：使用TS客户端没必要注册账号，但如果你想注册记得去<a href="https://teamspeak.com/en/">官网</a>，而不是Teamspeak中文站。</p><p>服务器可以在<a href="http://www.ts1.cn/price">Teamspeak中文站</a>上买，但我刚好有个空闲的服务器，就打算用来搭TS了。</p><p><img src="https://gitee.com/lee-jesse-jiaze/picture-bed/raw/master/uPic/截屏2022-02-15 17.19.50.png" style="zoom:50%;" /></p><p>使用Docker部署Teamspeak服务器可以说非常非常简单。</p><h3 id="安装docker">🐳安装Docker</h3><p>网上有很多<a href="https://yeasy.gitbook.io/docker_practice/install">教程</a>，随便参考一个装好就行。由于我用的是阿里云的服务器，可以直接选带Docker的镜像。完成安装之后可以使用<code>docker -v</code>指令测试安装是否成功，如果能正常显示版本号就说明没问题。</p><p>建立好远程连接就可以开始配置了。阿里云的服务器最好先切换到root账号（输入<code>sudo su root</code>）</p><h3 id="使用docker安装ts-server">☎️使用Docker安装TS server</h3><p>运行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dit -p 9987:9987/udp -p 10011:10011 -p 30033:30033 -e TS3SERVER_LICENSE=accept teamspeak</span><br></pre></td></tr></table></figure><p>Docker就会自动下载最新的teamspeak镜像并启动服务，更多环境变量设置详见<a href="https://hub.docker.com/_/teamspeak">官方文档</a></p><h3 id="修改防火墙规则">🔒修改防火墙规则</h3><p>TS server是不能直接通过防火墙的，所以需要在服务器后台把上面三个端口开放出来</p><p><img src="https://gitee.com/lee-jesse-jiaze/picture-bed/raw/master/uPic/截屏2022-02-15 17.39.40.png" style="zoom:50%;" /></p><h3 id="管理员密钥">🔑管理员密钥</h3><p>TS服务器启动的时候会打印出一些信息，主要有管理员的用户名、密码以及Token等。但我们之前使用了<code>docker run -dit</code>让容器在后台运行，所以并没有显示出来。这时候就需要查看Docker的logs来获取这些信息。</p><p>找到容器的ID</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><p>查看log</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f [CONTATINER ID]</span><br></pre></td></tr></table></figure><p>这个[CONTATINER ID]就是上面找到的TS对应的容器🆔</p><p>这时候就能看到管理员的用户名、密码以及Token等信息了，配置客户端是填入即可。</p><h2 id="mac-os闪退bug">🐞Mac OS闪退bug</h2><p>从官网上下载MacOS的客户端连接服务器的时候可能会闪退</p><p><img src="https://gitee.com/lee-jesse-jiaze/picture-bed/raw/master/uPic/截屏2022-02-15 17.48.25.png" alt="截屏2022-02-1517.48.25" style="zoom:50%;" /></p><p>一点Connect就闪退，这bug还<a href="https://community.teamspeak.com/t/ts-client-crashes-on-macos-11-3-11-4/17656">挺常见的</a>。解决办法是下载Teamspeak3的beta版，这里是<a href="http://files.teamspeak-services.com/pre_releases/client/3.5.7-beta.1/TeamSpeak3-Client-macosx-3.5.7.dmg">下载链接</a>。这么严重的Bug（快一年了），而且beta版已经修复了，为什么一直不发正式版呢？！想不明白</p>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;h2 id=&quot;我的语音聊天服务器&quot;&gt;🎮我的语音聊天服务器&lt;/h2&gt;
&lt;p&gt;（主要用于游戏连麦/聊天）&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;地址&lt;/strong&gt;：106.15.60.</summary>
      
    
    
    
    
    <category term="Tutorials" scheme="http://keep-a.live/tags/Tutorials/"/>
    
    <category term="Teamspeak" scheme="http://keep-a.live/tags/Teamspeak/"/>
    
    <category term="Server" scheme="http://keep-a.live/tags/Server/"/>
    
  </entry>
  
  <entry>
    <title>WSL2 use proxy of Windows</title>
    <link href="http://keep-a.live/2021/12/22/WSL2-use-proxy-of-Windows/"/>
    <id>http://keep-a.live/2021/12/22/WSL2-use-proxy-of-Windows/</id>
    <published>2021-12-22T07:54:45.000Z</published>
    <updated>2021-12-24T10:01:27.979Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><p><a href="/2021/12/22/WSL使用Windows中的V2rayN/">中文</a>｜<a href="/2021/12/22/WSL2-use-proxy-of-Windows/">English</a></p><p>Install <code>proxychains4</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install proxychains4</span><br></pre></td></tr></table></figure><p>To configure <code>proxychains4</code> in a normal Ubuntu or <strong>WSL1</strong>, you just need to modify <code>/etc/proxychains4.conf</code>.</p><p>Here's how to do it</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/proxychains4.conf</span><br></pre></td></tr></table></figure><p>Go to the bottom line and change the port according to the format it is written in. Make it match the proxy port you are using.</p><p>But in <strong>WSL2</strong>, the address of the subsystem and the host are not the same, which means you can't use 127.0.0.1 directly anymore.</p><p>You can check the IP address of the host with the following command</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/resolv.conf | grep nameserver | awk &#x27;&#123; print $2 &#125;&#x27;</span><br></pre></td></tr></table></figure><p>So just add the following two lines to <code>~/.zshrc</code> or <code>~/.bashrc</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hostip=$(cat /etc/resolv.conf | grep nameserver | awk &#x27;&#123; print $2 &#125;&#x27;)</span><br><span class="line">sudo sed -i &quot;$ c socks5 $&#123;hostip&#125; 10808&quot; /etc/proxychains4.conf</span><br></pre></td></tr></table></figure><p>⚠️ I use v2rayN so it is <code>10808</code> port, please adjust it according to the proxy you use.</p><p>This automatically changes the last line of <code>/etc/proxychains4.conf</code> each time the command line is opened.</p><p>After that you can go proxy by adding <code>proxychains4</code> in front of the command.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 curl myip.ipip.net</span><br><span class="line">当前 IP：XXX.XXX.XX.XXX  来自于：荷兰 北荷兰省 阿姆斯特丹  it7.net</span><br></pre></td></tr></table></figure><p>By the way <code>proxychains4</code> should be written after <code>sudo</code>.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo proxychains4 apt-get update</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;p&gt;&lt;a href=&quot;/2021/12/22/WSL使用Windows中的V2rayN/&quot;&gt;中文&lt;/a&gt;｜&lt;a href=&quot;/2021/12/22/WSL2-use-proxy-</summary>
      
    
    
    
    
    <category term="Tutorials" scheme="http://keep-a.live/tags/Tutorials/"/>
    
    <category term="WSL2" scheme="http://keep-a.live/tags/WSL2/"/>
    
    <category term="Windows" scheme="http://keep-a.live/tags/Windows/"/>
    
    <category term="proxy" scheme="http://keep-a.live/tags/proxy/"/>
    
  </entry>
  
  <entry>
    <title>WSL使用Windows中的V2rayN</title>
    <link href="http://keep-a.live/2021/12/22/WSL%E4%BD%BF%E7%94%A8Windows%E4%B8%AD%E7%9A%84V2rayN/"/>
    <id>http://keep-a.live/2021/12/22/WSL%E4%BD%BF%E7%94%A8Windows%E4%B8%AD%E7%9A%84V2rayN/</id>
    <published>2021-12-22T07:54:45.000Z</published>
    <updated>2021-12-24T10:00:28.727Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><p><a href="/2021/12/22/WSL使用Windows中的V2rayN/">中文</a>｜<a href="/2021/12/22/WSL2-use-proxy-of-Windows/">English</a></p><p>安装<code>proxychains4</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install proxychains4</span><br></pre></td></tr></table></figure><p>在普通的Ubuntu/<strong>WSL1</strong>中要配置<code>proxychains4</code>只需要修改一下<code>/etc/proxychains4.conf</code>就行。具体做法是</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/proxychains4.conf</span><br></pre></td></tr></table></figure><p>到最下面一行按照它写好的格式修改端口为你所用代理的端口。</p><p>但是在<strong>WSL2</strong>中，子系统和主机的地址并不一样，也就是说不能直接用127.0.0.1了。</p><p>你可以使用以下命令查看主机的IP</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/resolv.conf | grep nameserver | awk &#x27;&#123; print $2 &#125;&#x27;</span><br></pre></td></tr></table></figure><p>所以只需要在<code>~/.zshrc</code>或者<code>～/.bashrc</code>中加上以下两行</p><p>⚠️用的是v2rayN所以是<code>10808</code>端口，请根据你用的代理自行调整一下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hostip=$(cat /etc/resolv.conf | grep nameserver | awk &#x27;&#123; print $2 &#125;&#x27;)</span><br><span class="line">sudo sed -i &quot;$ c socks5 $&#123;hostip&#125; 10808&quot; /etc/proxychains4.conf</span><br></pre></td></tr></table></figure><p>在每次开命令行的时候自动更改<code>/etc/proxychains4.conf</code>的最后一行</p><p>之后你就可以通过在命令前添加proxychains4来走代理了</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 curl myip.ipip.net</span><br><span class="line">当前 IP：XXX.XXX.XX.XXX  来自于：荷兰 北荷兰省 阿姆斯特丹  it7.net</span><br></pre></td></tr></table></figure><p>另外proxychains4要写在sudo后面</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo proxychains4 apt-get update</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;p&gt;&lt;a href=&quot;/2021/12/22/WSL使用Windows中的V2rayN/&quot;&gt;中文&lt;/a&gt;｜&lt;a href=&quot;/2021/12/22/WSL2-use-proxy-</summary>
      
    
    
    
    
    <category term="Tutorials" scheme="http://keep-a.live/tags/Tutorials/"/>
    
    <category term="WSL2" scheme="http://keep-a.live/tags/WSL2/"/>
    
    <category term="Windows" scheme="http://keep-a.live/tags/Windows/"/>
    
    <category term="proxy" scheme="http://keep-a.live/tags/proxy/"/>
    
  </entry>
  
  <entry>
    <title>在WSL2中安装CUDA</title>
    <link href="http://keep-a.live/2021/12/22/Install-CUDA/"/>
    <id>http://keep-a.live/2021/12/22/Install-CUDA/</id>
    <published>2021-12-22T07:11:45.000Z</published>
    <updated>2022-03-27T06:25:07.932Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><h2 id="系统要求">系统要求</h2><ul><li><p>需要 <a href="https://microsoft.com/software-download/windows11">Windows 11</a> or <a href="https://microsoft.com/software-download/windows10">Windows 10, version 21H2</a>。虽然官方说的要求是windows版本在<code>20145</code>及以上，但还是最好去设置里加入<strong>Windows预览体验计划</strong>。在Windows命令行中运行<code>winver</code>可以查看内部版本号</p></li><li><p>WSL内核版本在4.19.121及以上，在wsl命令行中运行<code>uname -r</code>查看版本，如果版本过低在Windows命令行中运行 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --update</span><br></pre></td></tr></table></figure></p></li><li><p>一张GeForce/Quadro显卡</p></li></ul><h2 id="在pc上安装cuda驱动程序">在PC上安装CUDA驱动程序</h2><p>🌟下载并安装 <a href="https://developer.nvidia.com/cuda/wsl">NVIDIA CUDA-enabled driver for WSL</a>。</p><h2 id="安装ubuntu">安装Ubuntu</h2><p>在Windows的应用商店里安装Ubuntu，这个绝大多数教程都有，去找个别的教程看看就行</p><h2 id="安装cuda">安装CUDA</h2><p>我写了一个脚本，你可以直接它来安装CUDA</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http://keep-a.live/wsl_install_cuda.sh</span><br><span class="line">source ./wsl_install_cuda.sh</span><br></pre></td></tr></table></figure><p>这个过程会比较慢，尤其是下载<code>cuda-toolkit</code>的时候，如果你想用代理的话可以试试proxychains4，详见这篇<a href="/2021/12/22/WSL2-use-proxy-of-Windows/">blog</a>。</p><p>当然你也可以自己按照脚本中的内容手动安装</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wsl_install_cuda.sh</span></span><br><span class="line"><span class="comment"># DISTRO变量是NVIDIA CUDA资源库名称的一部分，被设置为你所使用的发行版名称；</span></span><br><span class="line"><span class="comment"># 我们将使用 &quot;wsl-ubuntu &quot;来表示WSL上的CUDA。 APT_INSTALL变量指定了要安装的软件包的名称；</span></span><br><span class="line"><span class="comment"># 你可以从wsl-ubuntu资源库中安装cuda软件包来获得最新版本的CUDA工具包。</span></span><br><span class="line"><span class="built_in">export</span> DISTRO=wsl-ubuntu</span><br><span class="line"><span class="built_in">export</span> APT_INSTALL=cuda</span><br><span class="line"><span class="comment"># export DISTRO=ubuntu2004</span></span><br><span class="line"><span class="comment"># export APT_INSTALL=cuda-toolkit-11-4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在apt-key中添加CUDA</span></span><br><span class="line">sudo apt-key adv --fetch-keys http://developer.download.nvidia.com/compute/cuda/repos/<span class="variable">$&#123;DISTRO&#125;</span>/x86_64/7fa2af80.pub</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb http://developer.download.nvidia.com/compute/cuda/repos/<span class="variable">$&#123;DISTRO&#125;</span>/x86_64 /&quot;</span> | sudo tee /etc/apt/sources.list.d/cuda.list</span><br><span class="line">wget https://developer.download.nvidia.com/compute/cuda/repos/<span class="variable">$&#123;DISTRO&#125;</span>/x86_64/cuda-<span class="variable">$&#123;DISTRO&#125;</span>.pin</span><br><span class="line">sudo mv cuda-<span class="variable">$&#123;DISTRO&#125;</span>.pin /etc/apt/preferences.d/cuda-repository-pin-600</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装CUDA Toolkit</span></span><br><span class="line">sudo apt update &amp;&amp; sudo apt -y upgrade</span><br><span class="line">sudo apt install -y <span class="variable">$&#123;APT_INSTALL&#125;</span></span><br><span class="line"><span class="comment"># sudo proxychains4 apt update &amp;&amp; sudo apt -y upgrade</span></span><br><span class="line"><span class="comment"># sudo proxychains4 apt install -y $&#123;APT_INSTALL&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置环境变量</span></span><br><span class="line">cat &lt;&lt; <span class="string">&#x27;EOS&#x27;</span> &gt;&gt; ~/.profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#Ref: https://astherier.com/blog/2021/07/windows11-cuda-on-wsl2-setup/</span></span><br><span class="line"><span class="built_in">export</span> PATH=/usr/<span class="built_in">local</span>/cuda-11.4/bin<span class="variable">$&#123;PATH:+:<span class="variable">$&#123;PATH&#125;</span>&#125;</span></span><br><span class="line"></span><br><span class="line">EOS</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装第三方库（可选）</span></span><br><span class="line">sudo apt install -y g++ freeglut3-dev build-essential libx11-dev libxmu-dev libxi-dev libglu1-mesa libglu1-mesa-dev</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">你已经完成了在WSL上配置CUDA的工作。</span></span><br><span class="line"><span class="string">请检查它们是否正常工作，详见https://github.com/nvidia/cuda-samples</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span></span><br></pre></td></tr></table></figure><h2 id="验证安装">验证安装</h2><h3 id="cuda-11.5及以前">CUDA 11.5及以前</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/cuda/samples/bin/x86_64/linux/release/</span><br></pre></td></tr></table></figure><p>然后运行，结果如下说明已经正常安装好了CUDA</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./deviceQuery</span></span><br><span class="line">./deviceQuery Starting...</span><br><span class="line"></span><br><span class="line"> CUDA Device Query (Runtime API) version (CUDART static linking)</span><br><span class="line"></span><br><span class="line">Detected 1 CUDA Capable device(s)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="cuda-11.6">CUDA &gt;=11.6</h3><p>详见<a href="https://github.com/NVIDIA">NVIDIA</a>/<strong><a href="https://github.com/NVIDIA/cuda-samples">cuda-samples</a></strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;h2 id=&quot;系统要求&quot;&gt;系统要求&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;需要 &lt;a href=&quot;https://microsoft.com/software-download/wi</summary>
      
    
    
    
    
    <category term="Tutorials" scheme="http://keep-a.live/tags/Tutorials/"/>
    
    <category term="WSL2" scheme="http://keep-a.live/tags/WSL2/"/>
    
    <category term="CUDA" scheme="http://keep-a.live/tags/CUDA/"/>
    
    <category term="Windows" scheme="http://keep-a.live/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>Progress Report 7</title>
    <link href="http://keep-a.live/2021/12/19/Progress-Report-7/"/>
    <id>http://keep-a.live/2021/12/19/Progress-Report-7/</id>
    <published>2021-12-19T08:55:42.000Z</published>
    <updated>2021-12-19T10:36:56.106Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><h2 id="进展">进展</h2><blockquote><p>第十五周主要完成了对《视觉SLAM十四讲》中第九讲——后端1的学习。内容包括以EKF为代表的滤波器后端和非线性优化后端。</p></blockquote><p>这一章的理论非常多，并且书上讲的并不透彻。所以又去看了很多相关的资料，比如说<a href="https://www.youtube.com/channel/UCi1TC2fLRvgBQNe-T4dp8Eg">Cyrill Stachniss</a>发布的课程<a href="https://www.youtube.com/watch?v=LhWUwzYcZuw&amp;t=1221s">Photogrammetry II - 07c - Bundle Adjustment - Part 2 (2015/16) - YouTube</a>, <a href="https://www.youtube.com/watch?v=Tz3pg3d1TIo">SLAM Course - 12 - FastSLAM (2013/14; Cyrill Stachniss) - YouTube</a>等等。</p><h3 id="后端概述">后端概述</h3><p>我的理解是，<strong>前端只利用两帧图像进行定位与建图，而后端利用多张图像进行定位与建图。</strong>这样做的好处有：</p><ul><li><strong>更完整的地图</strong>：比如说我们要建图的对象很复杂，仅仅使用两个图像可能依然会有一些遮挡的情况。必须从更对的位置对它进行观察才能获得其完整的样貌。</li><li><strong>更完整的路径</strong>：显然，如果想知道相机每一帧的位姿，也就是完整的路径，对每一帧都要进行估计。</li><li><strong>更高精度</strong>：单纯的使用前端会产生<strong>累计误差</strong>，意思是每使用一次视觉里程计，它都会有一定的不确定性，而一味的往前走这个不确定性就会累计。如果对每一步的估计都向右偏了1°，累积起来后果依然会很大。但是其实后面的观测对前面的观测依然有降低其不确定性的作用。所以说，考虑全局最优就是在消除累计误差。</li></ul><h3 id="滤波器后端">滤波器后端</h3><p>滤波器是过去SLAM后端的主流方法（尤其是LiDAR里）。这种方法主要是从概率论的角度来看状态估计，在SLAM里要估计的状态就是相机的位姿<span class="math inline">\(\boldsymbol x_1\)</span>到<span class="math inline">\(\boldsymbol x_N\)</span>和路标的位置<span class="math inline">\(\boldsymbol y_1\)</span>到<span class="math inline">\(\boldsymbol y_M\)</span>了。</p><p>SLAM过程可以由运动方程和观测方程描述： <span class="math display">\[\begin{array}{c}\boldsymbol x_k = f(\boldsymbol x_{k-1}, \boldsymbol u_k)+\boldsymbol w_k \\\boldsymbol z_k = h(\boldsymbol y_j, \boldsymbol x_k)+\boldsymbol v_{k,j}\end{array}\ \ \ \ \ \ \ k = 1,...,N,j=1,...,M\]</span> 由于误差项的存在，这里的位姿和路标位置并不是确定的量，而是一些<strong>随机变量</strong>。</p><blockquote><p>举个例子，假如说运动方程中的<span class="math inline">\(\boldsymbol u_k\)</span>是向正北走了1m，也就是机器人执行了向正北走1m的指令。但可能由于路面并不平，或者左边的轮子比右边的轮子大几毫米，或者就是单纯的多/少走了2cm，等等因素，真正的运动并不是真的向正北走1m。</p></blockquote><p>在这样的想法下，SLAM问题就变成了<strong>“什么样的位姿和路标状态最有可能产生现在的观测？”</strong>的问题，也就是一种<strong>极大似然估计</strong>。</p><p>记<span class="math inline">\(k\)</span>时刻所有待估计的未知量为<span class="math inline">\(\boldsymbol x_k\stackrel{\mathrm{def}}{=}\{\boldsymbol x_k,\boldsymbol y_1,...,\boldsymbol y_M\}\)</span>，运动和观测方程就变成了 <span class="math display">\[\left\{\begin{array}{c}\boldsymbol x_k = f(\boldsymbol x_{k-1}, \boldsymbol u_k)+\boldsymbol w_k \\\boldsymbol z_k = h( \boldsymbol x_k)+\boldsymbol v_{k,j}\end{array}\ \ \ \ \ \ \ k = 1,...,N\right.\]</span> 以下为贝叶斯滤波器的推导，我觉得书上并没有讲清楚，就补充在这里了</p><blockquote><p>我们希望通过<span class="math inline">\(0\)</span>到<span class="math inline">\(k\)</span>时刻得到的数据（运动的指令<span class="math inline">\(\boldsymbol u_{1:k}\)</span>以及观测<span class="math inline">\(\boldsymbol z_{1:k}\)</span>）求解<span class="math inline">\(\boldsymbol x_k\)</span>的分布情况，在滤波器里也就是要找到下面式子的<strong>递推公式</strong>（可能是因为SLAM强调时序性） <span class="math display">\[P(\boldsymbol x_k|\boldsymbol x_0, \boldsymbol u_{1:k}, \boldsymbol z_{1:k})\]</span> 按照贝叶斯公式，交换<span class="math inline">\(\boldsymbol z_{k}\)</span>和<span class="math inline">\(\boldsymbol x_{k}\)</span>可以得到 <span class="math display">\[P(\boldsymbol x_k|\boldsymbol x_0, \boldsymbol u_{1:k}, \boldsymbol z_{1:k})= \eta \underline {P(\boldsymbol z_{k}|\boldsymbol x_{k}, \boldsymbol u_{1:k}, \boldsymbol z_{1:k-1})}P(\boldsymbol x_k|\boldsymbol x_0, \boldsymbol u_{1:k}, \boldsymbol z_{1:k-1})\]</span> 其中<span class="math inline">\(\eta\)</span>为归一化因子。第二项是观测<span class="math inline">\(\boldsymbol z_{k}\)</span>的分布，这显然只与当前的位姿和路标有关，和之前的观测/运动都无关，所以也可以写成 <span class="math display">\[P(\boldsymbol x_k|\boldsymbol x_0, \boldsymbol u_{1:k}, \boldsymbol z_{1:k})= \eta P(\boldsymbol z_{k}|\boldsymbol x_{k})\underline {P(\boldsymbol x_k|\boldsymbol x_0, \boldsymbol u_{1:k}, \boldsymbol z_{1:k-1})}\]</span> 按照全概率公式以<span class="math inline">\(\boldsymbol x_{k-1}\)</span>为条件展开可得 <span class="math display">\[P(\boldsymbol x_k|\boldsymbol x_0, \boldsymbol u_{1:k}, \boldsymbol z_{1:k-1})=\int_{\boldsymbol x_{k-1}}\underline{P(\boldsymbol x_k|\boldsymbol x_{k-1},\boldsymbol x_0, \boldsymbol u_{1:k}, \boldsymbol z_{1:k-1})}P(\boldsymbol x_{k-1}|\boldsymbol x_0, \boldsymbol u_{1:k}, \boldsymbol z_{1:k-1})dx_{k-1}\]</span> 假设马尔可夫性，<span class="math inline">\(\boldsymbol x_k\)</span>只与<span class="math inline">\(k-1\)</span>有关，与<span class="math inline">\(k-1\)</span>之前都无关，就有 <span class="math display">\[P(\boldsymbol x_k|\boldsymbol x_0, \boldsymbol u_{1:k}, \boldsymbol z_{1:k})= \eta P(\boldsymbol z_{k}|\boldsymbol x_{k})\int _{\boldsymbol x_{k-1}}P(\boldsymbol x_k|\boldsymbol x_{k-1}, \boldsymbol u_{k})P(\boldsymbol x_{k-1}|\boldsymbol x_0, \underline{\boldsymbol u_{1:k}}, \boldsymbol z_{1:k-1})dx_{k-1}\]</span> 再假设<span class="math inline">\(\boldsymbol x_{k-1}\)</span>与<span class="math inline">\(\boldsymbol u_k\)</span>无关，就有</p><p>但其实也不一定无关，假如，世界只有前后间隔1m的两个可能的位置，<span class="math inline">\(k\)</span>时刻的运动是<strong>向前1m</strong>，那么<span class="math inline">\(k-1\)</span>的位置只可能是在<strong>后面</strong>而不是前面</p><p><span class="math display">\[  P(\boldsymbol x_k|\boldsymbol x_0, \boldsymbol u_{1:k}, \boldsymbol z_{1:k})= \eta P(\boldsymbol z_{k}|\boldsymbol x_{k})\int _{\boldsymbol x_{k-1}}P(\boldsymbol x_k|\boldsymbol x_{k-1}, \boldsymbol u_{k})\underline{P(\boldsymbol x_{k-1}|\boldsymbol x_0, \boldsymbol u_{1:k-1}, \boldsymbol z_{1:k-1})}dx_{k-1}  \]</span> 而这里<span class="math inline">\(P(\boldsymbol x_{k-1}|\boldsymbol x_0, \boldsymbol u_{1:k-1}, \boldsymbol z_{1:k-1})\)</span>就是<span class="math inline">\(k-1\)</span>时刻的分布。这样我们就有了求解<span class="math inline">\(\boldsymbol x_k\)</span>的分布情况的递归方法，以上也被称为<strong>贝叶斯滤波器</strong>。</p></blockquote><p>但实际上贝叶斯滤波器只是一个框架，并没有给出这个求积分的方法。具体的方法可以分为<strong>卡尔曼滤波器</strong>和<strong>粒子滤波器</strong>两大类。</p><ul><li>运动和观测方程均线性，噪声满足高斯分布→<strong>卡尔曼滤波器</strong></li><li>运动和观测方程非线性，但在某个点附近泰勒展开，噪声满足高斯分布→<strong>扩展卡尔曼滤波器</strong></li><li>噪声不满足高斯分布，用粒子模拟分布情况→<strong>粒子滤波器</strong></li></ul><p>但是在滤波器中，由于做了马尔可夫性的假设，依然没有考虑当前状态和很久以前状态的关系。并且还有EKF的线性化只能在很小的范围内成立，协方差矩阵会很大，没有异常检测机制等问题。尤其是在视觉SLAM中特征点很多且很容易存在误差。现在通常认为在同等计算量的条件下，非线性优化能取得更好的结果。</p><h3 id="非线性优化后端">非线性优化后端</h3><p>使用图优化求解BA。BA即Bundle Adjustment，意思是调整（adjustment）相机位姿和空间点的位置，使得从特征点发出的几束光线（bundles of light rays）对准相机的光心。这一张中讨论的BA很类似于SfM问题，也就是并没有考虑图像的时序性和计算的实时性。这一部分内容将在下一章滑动窗口优化中讲解。</p><h4 id="投影模型">投影模型</h4><p>投影模型如下 <span class="math display">\[\boldsymbol y=p=\begin{bmatrix}X\\Y\\Z\end{bmatrix}\xrightarrow[\text{相机坐标系}]{P&#39;=Rp+t}\begin{bmatrix}X&#39;\\Y&#39;\\Z&#39;\end{bmatrix}\xrightarrow[\text{归一化坐标}]{}\begin{bmatrix}X&#39;/Z&#39;\\Y&#39;/Z&#39;\\1\end{bmatrix}=\begin{bmatrix}u_c\\v_c\\1\end{bmatrix}\\\]</span> <span class="math display">\[\xrightarrow[\text{畸变模型}]{k_1,k_2}\begin{bmatrix}u_c(1+k_1r_c^2+k_2r_c^4)\\v_c(1+k_1r_c^2+k_2r_c^4)\end{bmatrix}=\begin{bmatrix}u_c&#39;\\v_c&#39;\end{bmatrix}\xrightarrow[\text{相机模型}]{f_x, f_y, c_x, c_y}\begin{bmatrix}f_xu_c&#39;+c_x\\f_yv_c&#39;+c_y\end{bmatrix}=\begin{bmatrix}u_s\\v_s\end{bmatrix}=\boldsymbol z\]</span> 这个过程也就是之前讲的<strong>观测方程</strong> <span class="math display">\[\boldsymbol z=h(\boldsymbol x, \boldsymbol y)\]</span> 这里的<span class="math inline">\(\boldsymbol x\)</span>就是相机的位姿，具体可以表示为李群<span class="math inline">\(\boldsymbol T\)</span>或者李代数<span class="math inline">\(\boldsymbol \xi\)</span>。那么，相机<span class="math inline">\(\boldsymbol \xi_i\)</span>观测到特征点<span class="math inline">\(\boldsymbol p_j\)</span>的误差<span class="math inline">\(\boldsymbol e_{ij}\)</span>就可以表示为 <span class="math display">\[\boldsymbol e_{ij}=\boldsymbol z_{ij}-h(\boldsymbol \xi_i, \boldsymbol p_j)\]</span> <strong>注意这里的<span class="math inline">\(\boldsymbol e_{ij}\)</span>并不是一个数值，而是二维向量</strong></p><p>整体的代价函数为 <span class="math display">\[\frac 1 2 \sum_{i=1}^m\sum_{j=1}^n \boldsymbol ||\boldsymbol e_{ij}||^2\]</span></p><blockquote><p>这个代价函数，看起来是个数值。但看了后面的我感觉把要优化的目标函数<strong>想成</strong>一个<span class="math inline">\(2m×n\)</span>的矩阵比较合理。也就是类似这个样子 <span class="math display">\[\begin{bmatrix}e_{11_1} &amp;&amp; e_{12_1} &amp;&amp; ...\\e_{11_2} &amp;&amp; e_{12_2} &amp;&amp; ...\\e_{21_1} &amp;&amp; e_{22_1} &amp;&amp; ...\\e_{21_2} &amp;&amp; e_{22_2} &amp;&amp; ...\\... &amp;&amp; ... &amp;&amp; ...\end{bmatrix}\]</span> 或者这样的分块矩阵</p><p><span class="math display">\[\begin{bmatrix}\boldsymbol e_{11} &amp;&amp; \boldsymbol e_{12} &amp;&amp; ...\\\boldsymbol e_{21} &amp;&amp; \boldsymbol e_{22} &amp;&amp; ...\\... &amp;&amp; ... &amp;&amp; ...\end{bmatrix}\]</span> 但是后面好像还会重新排列一下，<strong>写出来</strong>可能更像是这样 <span class="math display">\[\begin{bmatrix}\boldsymbol e_{11}&amp;\boldsymbol e_{12}&amp;...&amp;\boldsymbol e_{21}&amp;\boldsymbol e_{22}&amp;...\end{bmatrix}^T\]</span> 总而言之，这里的矩阵到底是几乘几的好像并不重要，理解清楚<span class="math inline">\(\boldsymbol e_{ij}\)</span>就行</p></blockquote><h4 id="ba的求解">BA的求解</h4><p>求解BA的过程其实是不断通过<span class="math inline">\(\boldsymbol H\Delta\boldsymbol x=\boldsymbol g\)</span>（高斯牛顿法）求解<span class="math inline">\(\Delta\boldsymbol x\)</span>。而在后端中，这里的<span class="math inline">\(\boldsymbol x\)</span>包含了所有的相机位姿和路标点位置 <span class="math display">\[\boldsymbol x=[\boldsymbol \xi_1,...,\boldsymbol \xi_m,\boldsymbol p_1,...,\boldsymbol p_n]^T\\\boldsymbol x=[\boldsymbol x_c, \boldsymbol x_p]^T\]</span> 而雅可比矩阵也相应的分块为 <span class="math display">\[\boldsymbol J=\begin{bmatrix}\boldsymbol F\ \ \boldsymbol E\end{bmatrix}\]</span> 对应的<span class="math inline">\(\boldsymbol H\)</span>矩阵为 <span class="math display">\[\boldsymbol H = \boldsymbol J^T\boldsymbol J=\begin{bmatrix}\boldsymbol F^T\boldsymbol F &amp; \boldsymbol F^T\boldsymbol E\\\boldsymbol E^T\boldsymbol F &amp; \boldsymbol E^T\boldsymbol E\end{bmatrix}\]</span> 要求解<span class="math inline">\(\boldsymbol H\Delta\boldsymbol x=\boldsymbol g\)</span>就要对<span class="math inline">\(\boldsymbol H\)</span>求逆，矩阵求逆是一个<span class="math inline">\(O(n^3)\)</span>复杂的的操作。对于<strong>特征点数量上百个</strong>的视觉SLAM，这种方法之所以可行是因为<span class="math inline">\(\boldsymbol H\)</span>的特殊结构，而这种特殊结构正与图优化的图模型对应。</p><h4 id="稀疏性和边缘化">稀疏性和边缘化</h4><p><span class="math inline">\(\boldsymbol H\)</span>的特殊结构就在于它并不是一个稠密的矩阵，尤其是在特征点对应的雅可比分块中。</p><blockquote><p>其实在滤波器（例如FastSLAM）中也会利用这一点，由于空间点（作为随机变量）的分布与其他特征点的位置是无关的，所以在估计的时候并不会使用很大的EKF，而是对每个空间点单独使用一个EKF进行估计。</p></blockquote><p>考虑代价函数的其中一个<span class="math inline">\(\boldsymbol e_{ij}\)</span> <span class="math display">\[\boldsymbol J_{ij}(x)=(\boldsymbol 0_{2×6},...,\boldsymbol 0_{2×6},\frac {\boldsymbol e_{ij}} {\boldsymbol \xi_{i}},\boldsymbol 0_{2×6},...\boldsymbol 0_{2×3},...,\boldsymbol 0_{2×3},\frac {\boldsymbol e_{ij}} {\boldsymbol p_{j}},\boldsymbol 0_{2×3},...,\boldsymbol 0_{2×3})\]</span> 显然相机在<span class="math inline">\(\boldsymbol \xi_{i}\)</span>观测<span class="math inline">\(\boldsymbol p_{j}\)</span>产生的误差只与<span class="math inline">\(\boldsymbol \xi_{i}\)</span>和<span class="math inline">\(\boldsymbol p_{j}\)</span>有关，所以雅可比矩阵有很强的稀疏性。从而导致<span class="math inline">\(\boldsymbol H\)</span>也有很强的稀疏性</p><figure><img src="https://s2.loli.net/2021/12/19/yWLJ2tKg1m4qVnG.png" alt="图1" /><figcaption aria-hidden="true">图1</figcaption></figure><p>最终的<span class="math inline">\(\boldsymbol H\)</span>的非零区域如下图左侧所示</p><figure><img src="https://s2.loli.net/2021/12/19/ghLIYDanKlBc48C.png" alt="图2" /><figcaption aria-hidden="true">图2</figcaption></figure><p>与非零块与图模型中的边一一对应。</p><p>有了这种性质就可以将线性方程组<span class="math inline">\(\boldsymbol H\Delta\boldsymbol x=\boldsymbol g\)</span>分块进行求解（详见书）</p><h4 id="鲁棒核函数">鲁棒核函数</h4><p>相比于滤波器的没有异常检测机制问题，非线性优化可以将误差项中的二范数换成鲁棒的核函数。</p><h2 id="问题">问题</h2><p>没什么问题，只是这章东西太多了很多地方理解的还不够深入。</p><h2 id="计划">计划</h2><p>跑一下后端BA的代码。</p><p>学习《视觉SLAM十四讲》第十章。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;h2 id=&quot;进展&quot;&gt;进展&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;第十五周主要完成了对《视觉SLAM十四讲》中第九讲——后端1的学习。内容包括以EKF为代表的滤波器后端和非线</summary>
      
    
    
    
    
    <category term="Notes" scheme="http://keep-a.live/tags/Notes/"/>
    
    <category term="SLAM" scheme="http://keep-a.live/tags/SLAM/"/>
    
    <category term="graduation project" scheme="http://keep-a.live/tags/graduation-project/"/>
    
    <category term="视觉SLAM十四讲" scheme="http://keep-a.live/tags/%E8%A7%86%E8%A7%89SLAM%E5%8D%81%E5%9B%9B%E8%AE%B2/"/>
    
  </entry>
  
  <entry>
    <title>A bug in FIFA 22</title>
    <link href="http://keep-a.live/2021/12/18/A-bug-in-FIFA-22/"/>
    <id>http://keep-a.live/2021/12/18/A-bug-in-FIFA-22/</id>
    <published>2021-12-18T14:43:24.000Z</published>
    <updated>2022-03-07T03:27:52.222Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><p>Ter Stegen has superpowers!</p>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;p&gt;Ter Stegen has superpowers!&lt;/p&gt;
</summary>
      
    
    
    
    <category term="gallery" scheme="http://keep-a.live/categories/gallery/"/>
    
    
    <category term="football" scheme="http://keep-a.live/tags/football/"/>
    
    <category term="FIFA22" scheme="http://keep-a.live/tags/FIFA22/"/>
    
    <category term="video games" scheme="http://keep-a.live/tags/video-games/"/>
    
    <category term="games" scheme="http://keep-a.live/tags/games/"/>
    
  </entry>
  
  <entry>
    <title>Progress Report 6</title>
    <link href="http://keep-a.live/2021/12/12/Progress-Report-6/"/>
    <id>http://keep-a.live/2021/12/12/Progress-Report-6/</id>
    <published>2021-12-12T06:51:51.000Z</published>
    <updated>2021-12-13T03:25:02.933Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><p><em>公式渲染的可能会比较慢</em></p><blockquote><p>在我的博客中你将会看到三种正经的东西：<a href="/tags/Tutorials">Tutorials</a>、<a href="/tags/Notes">Notes</a>和<a href="/tags/Projects">Projects</a></p><p><a href="/tags/Tutorials">Tutorials</a>会写的比较详细。一般是我在写代码中产生的，用于记录一些我会的东西，也可以当作<strong>教学</strong>来看</p><p><a href="/tags/Notes">Notes</a>是一些学习中的笔记，更多的记录一些我<strong>自己的理解</strong>，希望大家在评论区指正和讨论</p><p><a href="/tags/Projects">Projects</a>将会<strong>分享一些我做的东西</strong></p></blockquote><h1 id="毕业实训进度报告6">毕业实训进度报告6</h1><h2 id="进展">进展</h2><blockquote><p>第十四周主要完成了对《视觉SLAM十四讲》中第八讲——视觉里程计2的学习。内容主要包括视觉里程计中的<strong>光流法</strong>和<strong>直接法</strong>。</p></blockquote><p>关键点法的主要问题：</p><ul><li>计算特征点的时间长</li><li>忽略了除特征点以外的信息</li><li>在没有明显纹理信息时（如面对一面白墙）效果差</li></ul><h3 id="光流法">光流法</h3><p>计算特征点（仅第一帧）→使用光流追踪特征点→对极几何/PnP/ICP</p><h4 id="lucas-kanada光流稀疏光流的代表">Lucas-Kanada光流（稀疏光流的代表）</h4><p>将图像看成时间的函数： <span class="math inline">\(\boldsymbol{I}(t)\)</span> ， <span class="math inline">\(t\)</span> 时刻，位于 <span class="math inline">\((x,y)\)</span> 点的灰度表示为 <span class="math display">\[\boldsymbol{I}(x,y,t)\]</span> <strong>灰度不变假设：</strong> 同一空间点的灰度值，在各个图像中是固定不变的。 <span class="math display">\[\boldsymbol{I}(x+\mathrm{d} x,y+\mathrm{d}y,t+\mathrm{d}t)=\boldsymbol{I}(x,y,t)\]</span></p><p>泰勒展开 <span class="math display">\[\boldsymbol{I}(x+\mathrm{d} x,y+\mathrm{d}y,t+\mathrm{d}t)\approx \boldsymbol{I}(x,y,t) + \frac{\partial\boldsymbol{I}} {\partial x}\mathrm{d}x+ \frac{\partial\boldsymbol{I}} {\partial y}\mathrm{d}y+ \frac{\partial\boldsymbol{I}} {\partial t}\mathrm{d}t\]</span> 化简得 <span class="math display">\[\frac{\partial\boldsymbol{I}} {\partial x}\frac{\mathrm{d}x} {\mathrm{d}t}+ \frac{\partial\boldsymbol{I}} {\partial y}\frac{\mathrm{d}y} {\mathrm{d}t}=-\frac{\partial\boldsymbol{I}} {\partial t}\]</span> 💡<strong>这里我的理解是</strong>：灰度的变化是由图像本身的梯度 <span class="math inline">\(\frac{\partial\boldsymbol{I}} {\partial x}\)</span> 和像素的运动 <span class="math inline">\(\frac{\mathrm{d}x} {\mathrm{d}t}\)</span> 线性组合而成的。于是已知灰度的变化和图像的梯度就可以推出像素的运动，从而达到追踪特征点的目的。</p><p>但是像素的运动（在相机的成像中）是二维的，没法只通过一个方程解出来。于是LK光流假设：某一个窗口（特征点周围的一个小范围）内的像素具有相同的运动，这样就有了更多的约束，形成了一个超定方程，用最小二乘求解。</p><p>实际上是要找到<span class="math inline">\(\mathrm{d}x,\mathrm{d}y\)</span>使得<span class="math inline">\(\boldsymbol{I}\)</span>的变化最小，而优化过程中的Jacobian就是图像在目标点处的梯度</p><p><strong>多层光流：</strong>所拍摄的图像不那么连续的时候，<strong>泰勒展开</strong>就会失效，导致光流追踪的效果很差。所以使用图像金字塔进行多层光流，<strong>由粗至精</strong>的进行求解，具体来说就是使用<strong>上一层计算所得的运动</strong>对下一层的计算进行<strong>初始化</strong>。</p><h3 id="直接法">直接法</h3><p>同样也假设<strong>灰度不变</strong>，与光流法的区别在于<strong>同时追踪特征点和计算相机的运动</strong>，以确保全局最优。或者说，<strong>直接通过灰度的变化推出相机的运动</strong>。（💡但这一方法需要<strong>深度信息</strong>，这可以通过RGB-D相机直接得到，对单目相机只能通过三角测量得出，这就意味着只能用在初始化完成之后。或者同时把深度也作为优化目标，这就更加复杂了。）</p><p>灰度变化的产生原因：<strong>相机运动 <span class="math inline">\(\boldsymbol T\)</span>， 导致空间点 <span class="math inline">\(P\)</span> 在像素坐标系中运动 <span class="math inline">\(p_1→p_2\)</span> 。 </strong>而估计的运动<span class="math inline">\(\boldsymbol T\)</span>使得空间点<span class="math inline">\(P\)</span>在像素坐标中运动<span class="math inline">\(p_1→p_2&#39;\)</span>，导致真实的<span class="math inline">\(p_2\)</span>与估计的<span class="math inline">\(p_2&#39;\)</span>灰度<span class="math inline">\(e\)</span>不同，按照这个思路就可以求出<span class="math inline">\(\frac{\partial e} {\partial \boldsymbol{T}}\)</span>（推导详见书上） <span class="math display">\[\frac{\partial e} {\partial \boldsymbol{T}} = \frac{\partial \boldsymbol{I}_2} {\partial \boldsymbol{u}} \frac{\partial \boldsymbol{u}} {\partial \boldsymbol{q}}\frac{\partial \boldsymbol{q}} {\partial \delta\boldsymbol{\xi}}\delta\boldsymbol{\xi}\]</span> 其中<span class="math inline">\(\frac{\partial \boldsymbol{I}_2} {\partial \boldsymbol{u}}\)</span>为<span class="math inline">\(\boldsymbol{u}\)</span>处图像梯度，<span class="math inline">\(\frac{\partial \boldsymbol{u}} {\partial \boldsymbol{q}}\)</span>为二维点（像素坐标）对三维点（相机坐标）的导数，<span class="math inline">\(\frac{\partial \boldsymbol{q}} {\partial \delta\boldsymbol{\xi}}\)</span>为三维点对运动的导数，<span class="math inline">\(\delta\boldsymbol{\xi}\)</span>为运动的左扰动。反过来说就是，运动引起空间点在相机坐标系运动，引起空间点在像素坐标运动，再结合图像本身的梯度。这三者导致了灰度的变化。</p><p>接下来只需要初始化一个相机运动再进行进行非线性优化就行了。</p><p>举一个例子：假设初始化的运动是<em>原地不动</em>，但是空间点P对应的像素却变亮了。于是就需要模拟出一个运动，使得<strong>更亮的点</strong>对上空间点P。</p><p>这样一想就可以很容易的理解书上直接法的缺点了。</p><h2 id="问题">问题</h2><p>对自动曝光的相机可否先<strong>利用相机的曝光参数对图像进行预处理</strong>，再做以上两种方法，使其更好的满足灰度不变假设呢？</p><h2 id="计划">计划</h2><ol type="1"><li>学习《视觉SLAM十四讲》第九章</li><li>继续阅读ORBSLAM代码（&amp;论文，如果有时间）</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;p&gt;&lt;em&gt;公式渲染的可能会比较慢&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在我的博客中你将会看到三种正经的东西：&lt;a href=&quot;/tags/Tutorials&quot;&gt;T</summary>
      
    
    
    
    
    <category term="Notes" scheme="http://keep-a.live/tags/Notes/"/>
    
    <category term="SLAM" scheme="http://keep-a.live/tags/SLAM/"/>
    
    <category term="graduation project" scheme="http://keep-a.live/tags/graduation-project/"/>
    
    <category term="视觉SLAM十四讲" scheme="http://keep-a.live/tags/%E8%A7%86%E8%A7%89SLAM%E5%8D%81%E5%9B%9B%E8%AE%B2/"/>
    
  </entry>
  
  <entry>
    <title>ZYZ at work</title>
    <link href="http://keep-a.live/2021/12/10/ZYZ%20at%20work/"/>
    <id>http://keep-a.live/2021/12/10/ZYZ%20at%20work/</id>
    <published>2021-12-10T08:25:59.000Z</published>
    <updated>2021-12-10T12:47:21.578Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><p>This photo captures an angry woman😠.</p><h2 id="information">📷Information</h2><table><thead><tr class="header"><th style="text-align: center;">参数</th><th style="text-align: center;">数值</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">光圈系数</td><td style="text-align: center;">1.8</td></tr><tr class="even"><td style="text-align: center;">焦距</td><td style="text-align: center;">50</td></tr><tr class="odd"><td style="text-align: center;">照相感光度(ISO)</td><td style="text-align: center;">320</td></tr><tr class="even"><td style="text-align: center;">镜头型号</td><td style="text-align: center;">LUMIX S 50/F1.8</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;p&gt;This photo captures an angry woman😠.&lt;/p&gt;
&lt;h2 id=&quot;information&quot;&gt;📷Information&lt;/h2&gt;
&lt;tabl</summary>
      
    
    
    
    <category term="gallery" scheme="http://keep-a.live/categories/gallery/"/>
    
    
    <category term="life" scheme="http://keep-a.live/tags/life/"/>
    
    <category term="zyz" scheme="http://keep-a.live/tags/zyz/"/>
    
    <category term="photography" scheme="http://keep-a.live/tags/photography/"/>
    
  </entry>
  
  <entry>
    <title>Interesting things in this website</title>
    <link href="http://keep-a.live/2021/12/09/Interesting-things/"/>
    <id>http://keep-a.live/2021/12/09/Interesting-things/</id>
    <published>2021-12-09T12:43:55.000Z</published>
    <updated>2022-03-10T02:08:10.199Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><p>这两天刚刚搭起来这个博客，分享一些在写网站过程中有趣的地方。</p><h2 id="域名">🔗域名</h2><p>域名是我在<a href="https://sg.godaddy.com">Godaddy</a>上买的，服务器甚至都没买，就是借住在<a href="https://github.com/Li-Jesse-Jiaze/Li-Jesse-Jiaze.github.io">Github</a>上。主要是因为买国内的服务器还要备案什么的。</p><p>这样总共15块钱一年还算挺便宜的。关于为什么叫域名<code>keep-a.live</code>可以去看<a href="/about/">About</a>或者<a href="/">首页</a>。</p><h2 id="javascript">☕️JavaScript</h2><p>今天（2021年12月9日）可以说是我自己写<code>JavaScript</code>的第三天，这还是算上之前帮别人debug的日子。可以说是纯纯的新手。对于新手而言，我觉得网页好不好看，主要是看有没有找到好的模版，其次也有点需要审美。但对我自己的博客而言，更想做到<strong>有趣</strong>，而非仅仅好看。而这就有点像是在<strong>收藏</strong><code>JavaScript</code>，并且把它们都摆在这个网站上展示出来。</p><h3 id="页脚">🦶页脚</h3><p>页脚的有个很像命令行的东西</p><p>jesse@keep-alive:~/2021/12/09/Interesting-things/$ mkdir /cool/code</p><p>有两点有意思的地方</p><ol type="1"><li><h4 id="后面这个命令mkdir-coolcode有类似在打字一样的动画">后面这个命令mkdir /cool/code，有类似在打字一样的动画</h4></li></ol><p>这里用了<a href="https://www.cssscript.com/demo/simple-typewriter-effect-pure-javascript-typewriterjs/">这个</a>，直接移植。这里简单记录一下怎么移植。</p><p>​ Step1: 把<code>js</code>文件放到<code>source</code>文件夹里。其实不管是你自己的<code>source</code>文件夹还是主题的都可以，可以想象成他们之后会合并成一个文件夹。</p><p>​ Step2: 在需要这个js的<code>/layout/footer.ejs</code>里加上一行</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/js/typewriter.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果是放在页脚这种会出现在很多页面中的地方，一定要用<strong>绝对路径</strong></p><p>​ Step3: 在<code>/layout/footer.ejs</code>中调用即可，以修改ID为pathname和btapp的内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> pathname = <span class="built_in">window</span>.location.pathname;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;pathname&#x27;</span>).innerText = pathname;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> btapp = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btapp&#x27;</span>);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> bttypewriter = <span class="keyword">new</span> Typewriter(btapp, &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">loop</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    bttypewriter.typeString(<span class="string">&#x27;mkdir /cool/code&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        .pauseFor(<span class="number">800</span>)</span></span><br><span class="line"><span class="javascript">        .deleteChars(<span class="number">4</span>)</span></span><br><span class="line"><span class="javascript">        .typeString(<span class="string">&#x27;life&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        .pauseFor(<span class="number">800</span>)</span></span><br><span class="line"><span class="javascript">        .deleteAll()</span></span><br><span class="line"><span class="javascript">        .typeString(<span class="string">&#x27;have fun&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        .pauseFor(<span class="number">800</span>)</span></span><br><span class="line"><span class="javascript">        .start();</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2" type="1"><li><h4 id="前面这个路径20211209in也是在网站中当前网页的路径可以跳转到别的页面试试">前面这个路径~/2021/12/09/In…，也是在网站中当前网页的路径（可以跳转到别的页面试试）</h4></li></ol><p>这个实现起来很简单，以下是<code>.ejs</code>代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jesse@keep-alive:~<span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;pathname&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>$</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> pathname = <span class="built_in">window</span>.location.pathname;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;pathname&#x27;</span>).innerText = pathname;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这个博客用的是Hexo的框架，他具体是怎么生成的我还不是很清楚，不过只要把这个添加到你的主题文件夹里的<code>.ejs</code>，就可以咯。</p><h3 id="section">❗️404</h3><p>你可以尝试一下访问这个网站的<a href="/404">404页面</a>，也会很有意思的。是我之前看了-LKs-的视频，他推荐了个<a href="https://theuselessweb.com">网站</a>，这个网站里面的一个作品</p><h2 id="接下来要做的事">🔭接下来要做的事</h2><p>还有很多要做的东西，比如说<code>robot.txt</code>还没写，虽然说还没写这个就写404页面挺离谱的。还有会慢慢加上更多内容，换个主题什么的。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;p&gt;这两天刚刚搭起来这个博客，分享一些在写网站过程中有趣的地方。&lt;/p&gt;
&lt;h2 id=&quot;域名&quot;&gt;🔗域名&lt;/h2&gt;
&lt;p&gt;域名是我在&lt;a href=&quot;https://sg.go</summary>
      
    
    
    
    
    <category term="theme" scheme="http://keep-a.live/tags/theme/"/>
    
    <category term="css" scheme="http://keep-a.live/tags/css/"/>
    
    <category term="JavaScript" scheme="http://keep-a.live/tags/JavaScript/"/>
    
    <category term="website" scheme="http://keep-a.live/tags/website/"/>
    
  </entry>
  
  <entry>
    <title>Wheatfield with Crows - one of my favorite paintings</title>
    <link href="http://keep-a.live/2021/12/07/Wheatfield-with-Crows-my-favorite-painting/"/>
    <id>http://keep-a.live/2021/12/07/Wheatfield-with-Crows-my-favorite-painting/</id>
    <published>2021-12-07T12:22:20.000Z</published>
    <updated>2021-12-08T02:05:06.809Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><blockquote><p><strong><em>Wheatfield with Crows</em></strong> is a July 1890 painting by <a href="https://en.wikipedia.org/wiki/Vincent_van_Gogh">Vincent van Gogh</a>. It has been cited by several critics as one of his greatest works.</p></blockquote><p>Aesthetically I prefer Van Gogh's last self-portrait. But after seeing <em>Loving Vincent</em>, the storytelling of this painting appealed to me even more. In the play, the sound of Van Gogh's suicidal gunshot startles away crows in the wheat field. It was for the plot. But this being Van Gogh's last painting, it still touches me every time I see it.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;Wheatfield with Crows&lt;/em&gt;&lt;/strong&gt; is a July 1890 painting by</summary>
      
    
    
    
    <category term="gallery" scheme="http://keep-a.live/categories/gallery/"/>
    
    
    <category term="painting" scheme="http://keep-a.live/tags/painting/"/>
    
    <category term="Vincent" scheme="http://keep-a.live/tags/Vincent/"/>
    
    <category term="van Gogh" scheme="http://keep-a.live/tags/van-Gogh/"/>
    
  </entry>
  
  <entry>
    <title>Liwenjian Typora theme</title>
    <link href="http://keep-a.live/2021/12/07/Liwenjian-Typora-theme/"/>
    <id>http://keep-a.live/2021/12/07/Liwenjian-Typora-theme/</id>
    <published>2021-12-07T03:09:24.000Z</published>
    <updated>2021-12-12T08:23:37.287Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><p>I wrote a Typora theme. The project has been released to <a href="https://github.com/Li-Jesse-Jiaze/Liwenjian-Typora-Theme">my Github</a>. Feel free to use it.</p><h2 id="install">🔨Install</h2><ol type="1"><li>Download <a href="https://github.com/Li-Jesse-Jiaze/Liwenjian-Typora-Theme/releases/tag/0.1.0">this</a> zip from Github, extract this file, then you can get the <code>lwj-dark.css</code>, <code>lwj-light.css</code> and <code>liwenjian</code> folder.</li><li>Open typora, click <code>Preference</code> → <code>Apperance</code> → <code>Open Theme Folder</code>.</li><li>Put <code>lwj-dark.css</code>, <code>lwj-light.css</code> and <code>liwenjian</code> folder into the open folder.</li><li>Close Typora totally, reopen Typora and select <code>Theme</code> → <code>lwj-light</code> from the menu bar.</li></ol><h2 id="notes">⚠️Notes</h2><ul><li>Designed and tested on macOS. Not fully tested, but should work for Windows/Linux.</li><li>It is better to install <code>Operator Mono</code> font by yourself first.</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;p&gt;I wrote a Typora theme. The project has been released to &lt;a href=&quot;https://github.com/Li</summary>
      
    
    
    
    <category term="gallery" scheme="http://keep-a.live/categories/gallery/"/>
    
    
    <category term="theme" scheme="http://keep-a.live/tags/theme/"/>
    
    <category term="css" scheme="http://keep-a.live/tags/css/"/>
    
    <category term="markdown" scheme="http://keep-a.live/tags/markdown/"/>
    
    <category term="Typora" scheme="http://keep-a.live/tags/Typora/"/>
    
    <category term="Projects" scheme="http://keep-a.live/tags/Projects/"/>
    
  </entry>
  
</feed>
